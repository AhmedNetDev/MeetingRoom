{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ahmed\\\\source\\\\repos\\\\MeetingRoom\\\\MeetingRoom.WebUI\\\\src\\\\components\\\\AddMeetingModal.js\";\nimport React, { Component } from \"react\";\nimport { Modal, Button, Row, Col, Form } from \"react-bootstrap\";\nimport ErrorMessages from \"../components/layout/ErrorMessages\";\nimport { timehours } from \"../helpers/timeschedule\";\nimport axios from \"axios\";\n\nclass AddMeetingModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n\n      if (this.isValidMeetingInput(this.state.meetings, e)) {\n        axios.post(\"https://localhost:44388/api/Bookings\", {\n          date: e.target.date.value,\n          name: e.target.name.value,\n          email: e.target.email.value,\n          subject: e.target.subject.value,\n          start: e.target.start.value,\n          end: e.target.end.value,\n          meetingRoomId: parseInt(e.target.meetingRoomId.value)\n        }).catch(error => {\n          if (error.message !== null) {\n            this.setState({\n              errorMessage: error.message\n            });\n          } else {\n            this.setState({\n              errorMessage: null\n            });\n          }\n        });\n      }\n    };\n\n    this.isValidMeetingInput = (meetings, event) => {\n      let isValid = true;\n      let date = event.target.date.value;\n      let start = parseInt(event.target.start.value);\n      let end = parseInt(event.target.end.value);\n      let meetingRoomId = event.target.meetingRoomId.value;\n      let meetingsconcernedroom = meetings.filter(meeting => parseInt(meeting.meetingRoomId) === parseInt(meetingRoomId) && meeting.date.substr(0, 10) === date.substr(0, 10));\n      console.log(meetingsconcernedroom);\n      const found = meetingsconcernedroom.find(meeting => parseInt(meeting.start) <= start && parseInt(meeting.end) > start || parseInt(meeting.start) < end && parseInt(meeting.end) >= end);\n      console.log(found);\n      const minstarttime = Math.min(...meetingsconcernedroom.map(x => parseInt(x.start)));\n      const maxendtime = Math.max(...meetingsconcernedroom.map(x => parseInt(x.end)));\n      console.log(minstarttime);\n      console.log(maxendtime);\n\n      if (found !== undefined) {\n        this.setState({\n          errorMessage: \"Meeting timeslot is busy, please choose another one\"\n        });\n        isValid = false;\n      } else {\n        this.setState({\n          errorMessage: null\n        });\n      }\n\n      return isValid;\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.isValidMeetingInput = this.isValidMeetingInput.bind(this);\n    this.state = {\n      meetingrooms: [],\n      meetings: [],\n      errorMessage: null\n    };\n  }\n\n  componentDidMount() {\n    axios.get(\"https://localhost:44388/api/MeetingRooms\").then(res => this.setState({\n      meetingrooms: res.data\n    })).catch(error => {\n      if (error.message !== null) {\n        this.setState({\n          errorMessage: error.message\n        });\n      } else {\n        this.setState({\n          errorMessage: null\n        });\n      }\n    });\n    axios.get(\"https://localhost:44388/api/Bookings\").then(res => this.setState({\n      meetings: res.data\n    })).catch(error => {\n      if (error.message !== null) {\n        this.setState({\n          errorMessage: error.message\n        });\n      } else {\n        this.setState({\n          errorMessage: null\n        });\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Modal, Object.assign({}, this.props, {\n      size: \"lg\",\n      \"aria-labelledby\": \"contained-modal-title-vcenter\",\n      centered: true,\n      animation: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      id: \"contained-modal-title-vcenter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }\n    }, \"Add Meeting\")), this.state.errorMessage !== null ? /*#__PURE__*/React.createElement(ErrorMessages, {\n      theMessage: this.state.errorMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }) : null, /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      sm: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"date\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 19\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"date\",\n      name: \"date\",\n      required: true,\n      placeholder: \"Meeting Date\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 19\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"name\",\n      required: true,\n      placeholder: \"Owner Name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 19\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"email\",\n      required: true,\n      placeholder: \"Email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"subject\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 19\n      }\n    }, \"Subject\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"subject\",\n      required: true,\n      placeholder: \"Subject\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"start\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }, \"Start hour time\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    }, timehours.map(time => /*#__PURE__*/React.createElement(\"option\", {\n      key: time,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 23\n      }\n    }, time)))), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }\n    }, \"End hourtime\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 19\n      }\n    }, timehours.map(time => /*#__PURE__*/React.createElement(\"option\", {\n      key: time,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 23\n      }\n    }, time)))), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"meetingRoomId\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 19\n      }\n    }, \"Meeting room\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 19\n      }\n    }, this.state.meetingrooms.map(room => /*#__PURE__*/React.createElement(\"option\", {\n      key: room.id,\n      value: room.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 23\n      }\n    }, room.name)))), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 19\n      }\n    }, \"Add meeting\")))))), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"danger\",\n      onClick: this.props.onHide,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }\n    }, \"Close\")));\n  }\n\n}\n\nexport default AddMeetingModal;","map":{"version":3,"sources":["C:/Users/ahmed/source/repos/MeetingRoom/MeetingRoom.WebUI/src/components/AddMeetingModal.js"],"names":["React","Component","Modal","Button","Row","Col","Form","ErrorMessages","timehours","axios","AddMeetingModal","constructor","props","handleSubmit","e","preventDefault","isValidMeetingInput","state","meetings","post","date","target","value","name","email","subject","start","end","meetingRoomId","parseInt","catch","error","message","setState","errorMessage","event","isValid","meetingsconcernedroom","filter","meeting","substr","console","log","found","find","minstarttime","Math","min","map","x","maxendtime","max","undefined","bind","meetingrooms","componentDidMount","get","then","res","data","render","time","room","id","onHide"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Modal, Button, Row, Col, Form } from \"react-bootstrap\";\r\nimport ErrorMessages from \"../components/layout/ErrorMessages\";\r\nimport { timehours } from \"../helpers/timeschedule\";\r\nimport axios from \"axios\";\r\n\r\nclass AddMeetingModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.isValidMeetingInput = this.isValidMeetingInput.bind(this);\r\n    this.state = { meetingrooms: [], meetings: [], errorMessage: null };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(\"https://localhost:44388/api/MeetingRooms\")\r\n      .then((res) => this.setState({ meetingrooms: res.data }))\r\n      .catch((error) => {\r\n        if (error.message !== null) {\r\n          this.setState({\r\n            errorMessage: error.message,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            errorMessage: null,\r\n          });\r\n        }\r\n      });\r\n\r\n    axios\r\n      .get(\"https://localhost:44388/api/Bookings\")\r\n      .then((res) => this.setState({ meetings: res.data }))\r\n      .catch((error) => {\r\n        if (error.message !== null) {\r\n          this.setState({\r\n            errorMessage: error.message,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            errorMessage: null,\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (this.isValidMeetingInput(this.state.meetings, e)) {\r\n      axios\r\n        .post(\"https://localhost:44388/api/Bookings\", {\r\n          date: e.target.date.value,\r\n          name: e.target.name.value,\r\n          email: e.target.email.value,\r\n          subject: e.target.subject.value,\r\n          start: e.target.start.value,\r\n          end: e.target.end.value,\r\n          meetingRoomId: parseInt(e.target.meetingRoomId.value),\r\n        })\r\n        .catch((error) => {\r\n          if (error.message !== null) {\r\n            this.setState({\r\n              errorMessage: error.message,\r\n            });\r\n          } else {\r\n            this.setState({\r\n              errorMessage: null,\r\n            });\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  isValidMeetingInput = (meetings, event) => {\r\n    let isValid = true;\r\n    let date = event.target.date.value;\r\n    let start = parseInt(event.target.start.value);\r\n    let end = parseInt(event.target.end.value);\r\n    let meetingRoomId = event.target.meetingRoomId.value;\r\n    let meetingsconcernedroom = meetings.filter(\r\n      (meeting) =>\r\n        parseInt(meeting.meetingRoomId) === parseInt(meetingRoomId) &&\r\n        meeting.date.substr(0, 10) === date.substr(0, 10)\r\n    );\r\n    console.log(meetingsconcernedroom);\r\n    const found = meetingsconcernedroom.find(\r\n      (meeting) =>\r\n        (parseInt(meeting.start) <= start && parseInt(meeting.end) > start) ||\r\n        (parseInt(meeting.start) < end && parseInt(meeting.end) >= end)\r\n    );\r\n    console.log(found);\r\n    const minstarttime = Math.min(\r\n      ...meetingsconcernedroom.map((x) => parseInt(x.start))\r\n    );\r\n\r\n    const maxendtime = Math.max(\r\n      ...meetingsconcernedroom.map((x) => parseInt(x.end))\r\n    );\r\n    console.log(minstarttime);\r\n    console.log(maxendtime);\r\n\r\n    if (found !== undefined) {\r\n      this.setState({\r\n        errorMessage: \"Meeting timeslot is busy, please choose another one\",\r\n      });\r\n      isValid = false;\r\n    } else {\r\n      this.setState({\r\n        errorMessage: null,\r\n      });\r\n    }\r\n\r\n    return isValid;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Modal\r\n        {...this.props}\r\n        size=\"lg\"\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered\r\n        animation={false}\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title id=\"contained-modal-title-vcenter\">\r\n            Add Meeting\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        {this.state.errorMessage !== null ? (\r\n          <ErrorMessages theMessage={this.state.errorMessage} />\r\n        ) : null}\r\n        <Modal.Body>\r\n          <Row>\r\n            <Col sm={6}>\r\n              <Form onSubmit={this.handleSubmit}>\r\n                <Form.Group controlId=\"date\">\r\n                  <Form.Label>Date</Form.Label>\r\n                  <Form.Control\r\n                    type=\"date\"\r\n                    name=\"date\"\r\n                    required\r\n                    placeholder=\"Meeting Date\"\r\n                  />\r\n                </Form.Group>\r\n                <Form.Group controlId=\"name\">\r\n                  <Form.Label>Name</Form.Label>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    required\r\n                    placeholder=\"Owner Name\"\r\n                  />\r\n                </Form.Group>\r\n                <Form.Group controlId=\"email\">\r\n                  <Form.Label>Email</Form.Label>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    name=\"email\"\r\n                    required\r\n                    placeholder=\"Email\"\r\n                  />\r\n                </Form.Group>\r\n                <Form.Group controlId=\"subject\">\r\n                  <Form.Label>Subject</Form.Label>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    name=\"subject\"\r\n                    required\r\n                    placeholder=\"Subject\"\r\n                  />\r\n                </Form.Group>\r\n                <Form.Group controlId=\"start\">\r\n                  <Form.Label>Start hour time</Form.Label>\r\n                  <Form.Control as=\"select\">\r\n                    {timehours.map((time) => (\r\n                      <option key={time}>{time}</option>\r\n                    ))}\r\n                  </Form.Control>\r\n                </Form.Group>\r\n                <Form.Group controlId=\"end\">\r\n                  <Form.Label>End hourtime</Form.Label>\r\n                  <Form.Control as=\"select\">\r\n                    {timehours.map((time) => (\r\n                      <option key={time}>{time}</option>\r\n                    ))}\r\n                  </Form.Control>\r\n                </Form.Group>\r\n                <Form.Group controlId=\"meetingRoomId\">\r\n                  <Form.Label>Meeting room</Form.Label>\r\n                  <Form.Control as=\"select\">\r\n                    {this.state.meetingrooms.map((room) => (\r\n                      <option key={room.id} value={room.id}>\r\n                        {room.name}\r\n                      </option>\r\n                    ))}\r\n                  </Form.Control>\r\n                </Form.Group>\r\n                <Form.Group>\r\n                  <Button variant=\"primary\" type=\"submit\">\r\n                    Add meeting\r\n                  </Button>\r\n                </Form.Group>\r\n              </Form>\r\n            </Col>\r\n          </Row>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"danger\" onClick={this.props.onHide}>\r\n            Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddMeetingModal;\r\n"]},"metadata":{},"sourceType":"module"}