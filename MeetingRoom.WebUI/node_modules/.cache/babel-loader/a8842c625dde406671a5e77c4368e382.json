{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ahmed\\\\source\\\\repos\\\\MeetingRoom\\\\MeetingRoom.WebUI\\\\src\\\\components\\\\AddMeetingModal.js\";\nimport React, { Component } from \"react\";\nimport { Modal, Button, Row, Col, Form } from \"react-bootstrap\";\nimport ErrorMessages from \"../components/layout/ErrorMessages\";\nimport { timehours } from \"../helpers/timeschedule\";\nimport axios from \"axios\";\n\nclass AddMeetingModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.isValidMeetingInput = (meetings, event) => {\n      let isValid = true;\n      let date = event.target.date.value;\n      let start = parseInt(event.target.start.value);\n      let end = parseInt(event.target.end.value);\n      let meetingRoomId = event.target.meetingRoomId.value;\n      let meetingsconcernedroom = meetings.filter(meeting => parseInt(meeting.meetingRoomId) === parseInt(meetingRoomId) && meeting.date.substr(0, 10) === date.substr(0, 10));\n      console.log(meetingsconcernedroom);\n      const found = meetingsconcernedroom.find(meeting => parseInt(meeting.start) === start && parseInt(meeting.end) === end);\n\n      if (found !== undefined) {\n        this.setState({\n          errorMessage: \"Meeting timeslot is busy, please choose another one\"\n        });\n        isValid = false;\n      } else {\n        this.setState({\n          errorMessage: null\n        });\n      }\n\n      if (parseInt(start) >= parseInt(end)) {\n        this.setState({\n          errorMessage: \"Meeting time slot is not valid\"\n        });\n        isValid = false;\n      } else {\n        this.setState({\n          errorMessage: null\n        });\n      }\n\n      return isValid;\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.isValidMeetingInput = this.isValidMeetingInput.bind(this);\n    this.state = {\n      meetingrooms: [],\n      meetings: [],\n      errorMessage: null\n    };\n  }\n\n  componentDidMount() {\n    axios.get(\"https://localhost:44388/api/MeetingRooms\").then(res => this.setState({\n      meetingrooms: res.data\n    })).catch(error => {\n      if (error.message !== null) {\n        this.setState({\n          errorMessage: error.message\n        });\n      } else {\n        this.setState({\n          errorMessage: null\n        });\n      }\n    });\n    axios.get(\"https://localhost:44388/api/Bookings\").then(res => this.setState({\n      meetings: res.data\n    })).catch(error => {\n      if (error.message !== null) {\n        this.setState({\n          errorMessage: error.message\n        });\n      } else {\n        this.setState({\n          errorMessage: null\n        });\n      }\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    if (this.isValidMeetingInput(this.state.meetings, e)) {\n      axios.post(\"https://localhost:44388/api/Bookings\", {\n        date: e.target.date.value,\n        name: e.target.name.value,\n        email: e.target.email.value,\n        subject: e.target.subject.value,\n        start: e.target.start.value,\n        end: e.target.end.value,\n        meetingRoomId: parseInt(e.target.meetingRoomId.value)\n      }).catch(error => {\n        if (error.message !== null) {\n          this.setState({\n            errorMessage: error.message\n          });\n        } else {\n          this.setState({\n            errorMessage: null\n          });\n        }\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 12\n      }\n    });\n  }\n\n}\n\nexport default AddMeetingModal;","map":{"version":3,"sources":["C:/Users/ahmed/source/repos/MeetingRoom/MeetingRoom.WebUI/src/components/AddMeetingModal.js"],"names":["React","Component","Modal","Button","Row","Col","Form","ErrorMessages","timehours","axios","AddMeetingModal","constructor","props","isValidMeetingInput","meetings","event","isValid","date","target","value","start","parseInt","end","meetingRoomId","meetingsconcernedroom","filter","meeting","substr","console","log","found","find","undefined","setState","errorMessage","handleSubmit","bind","state","meetingrooms","componentDidMount","get","then","res","data","catch","error","message","e","preventDefault","post","name","email","subject","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Modal, Button, Row, Col, Form } from \"react-bootstrap\";\r\nimport ErrorMessages from \"../components/layout/ErrorMessages\";\r\nimport { timehours } from \"../helpers/timeschedule\";\r\nimport axios from \"axios\";\r\n\r\nclass AddMeetingModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.isValidMeetingInput = this.isValidMeetingInput.bind(this);\r\n    this.state = { meetingrooms: [], meetings: [], errorMessage: null };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(\"https://localhost:44388/api/MeetingRooms\")\r\n      .then((res) => this.setState({ meetingrooms: res.data }))\r\n      .catch((error) => {\r\n        if (error.message !== null) {\r\n          this.setState({\r\n            errorMessage: error.message,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            errorMessage: null,\r\n          });\r\n        }\r\n      });\r\n\r\n    axios\r\n      .get(\"https://localhost:44388/api/Bookings\")\r\n      .then((res) => this.setState({ meetings: res.data }))\r\n      .catch((error) => {\r\n        if (error.message !== null) {\r\n          this.setState({\r\n            errorMessage: error.message,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            errorMessage: null,\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    if (this.isValidMeetingInput(this.state.meetings, e)) {\r\n      axios\r\n        .post(\"https://localhost:44388/api/Bookings\", {\r\n          date: e.target.date.value,\r\n          name: e.target.name.value,\r\n          email: e.target.email.value,\r\n          subject: e.target.subject.value,\r\n          start: e.target.start.value,\r\n          end: e.target.end.value,\r\n          meetingRoomId: parseInt(e.target.meetingRoomId.value),\r\n        })\r\n        .catch((error) => {\r\n          if (error.message !== null) {\r\n            this.setState({\r\n              errorMessage: error.message,\r\n            });\r\n          } else {\r\n            this.setState({\r\n              errorMessage: null,\r\n            });\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  isValidMeetingInput = (meetings, event) => {\r\n    let isValid = true;\r\n    let date = event.target.date.value;\r\n    let start = parseInt(event.target.start.value);\r\n    let end = parseInt(event.target.end.value);\r\n    let meetingRoomId = event.target.meetingRoomId.value;\r\n    let meetingsconcernedroom = meetings.filter(\r\n      (meeting) =>\r\n        parseInt(meeting.meetingRoomId) === parseInt(meetingRoomId) &&\r\n        meeting.date.substr(0, 10) === date.substr(0, 10)\r\n    );\r\n    console.log(meetingsconcernedroom);\r\n    const found = meetingsconcernedroom.find(\r\n      (meeting) =>\r\n        parseInt(meeting.start) === start && parseInt(meeting.end) === end\r\n    );\r\n\r\n    if (found !== undefined) {\r\n      this.setState({\r\n        errorMessage: \"Meeting timeslot is busy, please choose another one\",\r\n      });\r\n      isValid = false;\r\n    } else {\r\n      this.setState({\r\n        errorMessage: null,\r\n      });\r\n    }\r\n\r\n    if (parseInt(start) >= parseInt(end)) {\r\n      this.setState({ errorMessage: \"Meeting time slot is not valid\" });\r\n      isValid = false;\r\n    } else {\r\n      this.setState({\r\n        errorMessage: null,\r\n      });\r\n    }\r\n    return isValid;\r\n  };\r\n\r\n  render() {\r\n    return <React.Fragment></React.Fragment>;\r\n  }\r\n}\r\n\r\nexport default AddMeetingModal;\r\n"]},"metadata":{},"sourceType":"module"}